include $(TOPDIR)/config.mk

LIB	= lib$(BOARD).a

OBJS	= $(BOARD).o flash.o ../common/ar7240_flash.o ../common/ar7240_s26_phy.o
SOBJS	= ../common/lowlevel_init.o

ifeq ($(BOARD), ap121)
SOBJS	+= hornet_pll_init.o
endif

#added by zcf, this is specific to each product
ifdef CONFIG_PID_MR302001
CFLAGS += -DCONFIG_PID_MR302001=$(CONFIG_PID_MR302001)
CFLAGS += -DGPIO_PHY_LED_BIT=$(GPIO_PHY_LED_BIT)
CFLAGS += -DNUM_OF_RJ45=$(NUM_OF_RJ45)
CFLAGS += -DGPIO_RJ45_BASE=$(GPIO_RJ45_BASE)
CFLAGS += -DGPIO_RJ45_ON=$(GPIO_RJ45_ON)
endif

ifdef CONFIG_PID_WR74104
CFLAGS += -DCONFIG_PID_WR74104=$(CONFIG_PID_WR74104)
CFLAGS += -DGPIO_PHY_LED_BIT=$(GPIO_PHY_LED_BIT)
CFLAGS += -DNUM_OF_RJ45=$(NUM_OF_RJ45)
CFLAGS += -DGPIO_RJ45_BASE=$(GPIO_RJ45_BASE)
CFLAGS += -DGPIO_RJ45_ON=$(GPIO_RJ45_ON)
endif

ifdef CONFIG_PID_WR74302CN
CFLAGS += -DCONFIG_PID_WR74302CN=$(CONFIG_PID_WR74302CN)
endif

ifdef CONFIG_PID_MR322002
CFLAGS += -DCONFIG_PID_MR322002=$(CONFIG_PID_MR322002)
endif

ifdef CONFIG_PID_WR70301
CFLAGS += -DCONFIG_PID_WR70301=$(CONFIG_PID_WR70301)
endif

ifdef CONFIG_PID_MR11U02
CFLAGS += -DCONFIG_PID_MR11U02=$(CONFIG_PID_MR11U02)
endif

ifdef CONFIG_PID_TR86601
CFLAGS += -DCONFIG_PID_TR86601=$(CONFIG_PID_TR86601)
endif

ifdef CONFIG_PID_TR86301
CFLAGS += -DCONFIG_PID_TR86301=$(CONFIG_PID_TR86301)
endif

ifdef CONFIG_PID_WA70102
CFLAGS += -DCONFIG_PID_WA70102=$(CONFIG_PID_WA70102)
endif

ifdef CONFIG_PID_721002
CFLAGS += -DCONFIG_PID_721002=$(CONFIG_PID_721002)
endif

ifdef GPIO_JUMPSTART_LED_BIT
CFLAGS += -DGPIO_JUMPSTART_LED_BIT=$(GPIO_JUMPSTART_LED_BIT)
endif

ifdef GPIO_JUMPSTART_LED_ON
CFLAGS += -DGPIO_JUMPSTART_LED_ON=$(GPIO_JUMPSTART_LED_ON)
endif

# [chenchao start] Add Recovery fireware led display.
ifdef GPIO_FIRMWARE_RECOVERY_LED_BIT
CFLAGS += -DGPIO_FIRMWARE_RECOVERY_LED_BIT=$(GPIO_FIRMWARE_RECOVERY_LED_BIT)
endif

ifdef GPIO_FIRMWARE_RECOVERY_LED_ON
CFLAGS += -DGPIO_FIRMWARE_RECOVERY_LED_ON=$(GPIO_FIRMWARE_RECOVERY_LED_ON)
endif
# [chenchao end]

ifdef GPIO_WLAN_LED_BIT
CFLAGS += -DGPIO_WLAN_LED_BIT=$(GPIO_WLAN_LED_BIT)
endif

ifdef GPIO_WLAN_LED_ON
CFLAGS += -DGPIO_WLAN_LED_ON=$(GPIO_WLAN_LED_ON)
endif

ifdef GPIO_INTERNET_LED_BIT
CFLAGS += -DGPIO_INTERNET_LED_BIT=$(GPIO_INTERNET_LED_BIT)
endif

ifdef GPIO_INTERNET_LED_ON
CFLAGS += -DGPIO_INTERNET_LED_ON=$(GPIO_INTERNET_LED_ON)
endif

ifdef GPIO_USB_POWER_SUPPORT
CFLAGS += -DGPIO_USB_POWER_SUPPORT=$(GPIO_USB_POWER_SUPPORT)
endif

ifdef GPIO_USB_POWER_ON
CFLAGS += -DGPIO_USB_POWER_ON=$(GPIO_USB_POWER_ON)
endif
ifdef GPIO_SYS_LED_BIT
CFLAGS += -DGPIO_SYS_LED_BIT=$(GPIO_SYS_LED_BIT)
endif

ifdef GPIO_SYS_LED_ON
CFLAGS += -DGPIO_SYS_LED_ON=$(GPIO_SYS_LED_ON)
endif

ifdef JUMPSTART_RST_MULTIPLEXED
CFLAGS += -DJUMPSTART_RST_MULTIPLEXED=$(JUMPSTART_RST_MULTIPLEXED)
endif

ifdef GPIO_JUMPSTART_SW_BIT
CFLAGS += -DGPIO_JUMPSTART_SW_BIT=$(GPIO_JUMPSTART_SW_BIT)
endif

ifdef GPIO_RESET_FAC_BIT
CFLAGS += -DGPIO_RESET_FAC_BIT=$(GPIO_RESET_FAC_BIT)
endif

ifdef GPIO_FAC_RST_HOLD_TIME
CFLAGS += -DGPIO_FAC_RST_HOLD_TIME=$(GPIO_FAC_RST_HOLD_TIME)
endif

ifdef GPIO_SLOW_ETH_LED
CFLAGS += -DGPIO_SLOW_ETH_LED=$(GPIO_SLOW_ETH_LED)
endif

ifeq ($(strip ${FIRMWARE_RECOVERY}),1)
CFLAGS += -DFIRMWARE_RECOVERY=$(FIRMWARE_RECOVERY)
endif

$(LIB):	.depend $(OBJS) $(SOBJS)
	$(AR) crv $@ $(OBJS) $(SOBJS)

#########################################################################

.depend:	Makefile $(SOBJS:.o=.S) $(OBJS:.o=.c)
		$(CC) -M $(CFLAGS) $(SOBJS:.o=.S) $(OBJS:.o=.c) > $@

sinclude .depend

#########################################################################
